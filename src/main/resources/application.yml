server:
  port: ${GATEWAY_PORT}

spring:
  cloud:
    gateway:
      mvc:
        routes:
          - id: task_service
            uri: ${TASK_SERVICE_URL}
            predicates:
              - Path=/api/task-service/**
            filters:
              - StripPrefix=2
          - id: habit_service
            uri: ${HABIT_SERVICE_URL}
            predicates:
              - Path=/api/habits/**
            filters:
              - StripPrefix=1
          - id: task_api_docs
            uri: ${TASK_SERVICE_URL}
            predicates:
              - Path=/aggregate/task-service/api-docs
            filters:
              - StripPrefix=2
          - id: habit_api_docs
            uri: ${HABIT_SERVICE_URL}
            predicates:
              - Path=/aggregate/habit-service/api-docs
            filters:
              - StripPrefix=2

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUE_URI}

springdoc:
  swagger-ui:
    path: /swagger-ui.html
    urls:
      - name: Task Service
        url: /aggregate/task-service/api-docs
      - name: Habit Service
        url: /aggregate/habit-service/api-docs

  api-docs:
    path: /api-docs
